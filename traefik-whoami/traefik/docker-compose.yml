# docker-compose.yml
services:
  traefik:
    image: traefik:v3.6.2      # 2025年12月最新的稳定版（你可以直接写 latest，但推荐写明版本）
    container_name: traefik
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
      - "443:443/udp"        # QUIC HTTP/3（可选）
#      - "8080:8080"          # 只在调试时开放，正式环境建议删掉
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ./traefik.yml:/traefik.yml:ro
      - ./dynamic:/dynamic:ro
      - ./letsencrypt:/letsencrypt
    networks:
      - traefik_net
    labels:
      - "traefik.enable=true"
      # 下面的 labels 已经全部移到 dynamic 里，这里彻底不需要了！

networks:
  traefik_net:
    external: true
